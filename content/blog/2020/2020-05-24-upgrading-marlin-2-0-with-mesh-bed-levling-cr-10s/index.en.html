---
title: Upgrading Marlin 2.0+ with Mesh Bed Levling CR-10s
author: Daniel Chen
date: '2020-05-24'
slug: upgrading-marlin-2-0-with-mesh-bed-levling-cr-10s
categories:
  - making
tags:
  - 3d-print
  - makers
subtitle: ''
summary: ''
authors: []
lastmod: '2020-05-24T17:34:18-04:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
---

<script src="{{< blogdown/postref >}}index.en_files/header-attrs/header-attrs.js"></script>


<div id="download-software" class="section level2">
<h2>Download software</h2>
<ul>
<li>Arduino: <a href="https://www.arduino.cc/en/Main/Software" class="uri">https://www.arduino.cc/en/Main/Software</a></li>
<li>Marlin and configurations: <a href="https://marlinfw.org/meta/download/" class="uri">https://marlinfw.org/meta/download/</a>
<ul>
<li>You need the Marlin firmware in the “Downloads” column and the configurations from the “Configuration” column.</li>
</ul></li>
</ul>
<p>Video guide from “The First Layer”: <a href="https://www.youtube.com/watch?v=-rOZpOiWYxM" class="uri">https://www.youtube.com/watch?v=-rOZpOiWYxM</a></p>
</div>
<div id="load-up-printer-specific-configurations" class="section level2">
<h2>Load up printer-specific configurations</h2>
<p>In the Configurations navigate to <code>config &gt; examples &gt; Creality &gt; CR-10s</code> and copy-paste the files into the <code>Marlin-2.0.x &gt; Marlin</code> folder.
It should prompt you to overwrite the existing <code>Configuration.h</code> and <code>Configuration_adv.h</code> files.</p>
</div>
<div id="load-up-the-firmware" class="section level2">
<h2>Load up the firmware</h2>
<p>Run the <code>Marlin.ino</code> file from the <code>Marlin</code> folder.
It should open up the Arduino IDE with the <code>Marlin</code>, <code>Configuration.h</code>, <code>Configuration_adv.h</code>, <code>Version.h</code>, <code>_Bootscreen.h</code>, and <code>_Statusscreen.h</code> files.</p>
</div>
<div id="select-the-correct-arduino-boards" class="section level2">
<h2>Select the correct Arduino boards</h2>
<ul>
<li><code>Tools &gt; board &gt; Arduino Mega or Mega 2560</code></li>
<li><code>Tools &gt; processor &gt; ATmega2560 (Mega2650)</code></li>
</ul>
</div>
<div id="make-edits-to-firmware-files" class="section level2">
<h2>Make edits to firmware files</h2>
<p>See here for the changes I made: <a href="https://github.com/chendaniely/3d-printer/pull/1" class="uri">https://github.com/chendaniely/3d-printer/pull/1</a></p>
<p>The relevant configurations you’d want to make for manual mesh leveling are:</p>
<ul>
<li>Disable auto bed leveling bilinear: <code>//#define AUTO_BED_LEVELING_BILINEAR</code></li>
<li>Enable mesh bed leveling: <code>#define MESH_BED_LEVELING</code></li>
<li>Enable restore mesh: <code>#define RESTORE_LEVELING_AFTER_G28</code></li>
</ul>
<p>If you are upgrading Marlin you’d also want to enable EPROM auto init: <code>#define EEPROM_AUTO_INIT</code></p>
</div>
<div id="flash-the-firmware" class="section level2">
<h2>Flash the firmware</h2>
<ul>
<li>Plug in your printer</li>
<li>verify</li>
</ul>
<p>If you run into any errors, this is a good video walkthrough of potential issues:
<a href="https://www.youtube.com/watch?v=lAKyZd63_ns" class="uri">https://www.youtube.com/watch?v=lAKyZd63_ns</a></p>
<p>I was having an error around <code>#include &lt;U8glib.h&gt;</code></p>
<div id="u8glib.h" class="section level4">
<h4>U8glib.h</h4>
<ul>
<li><a href="https://github.com/olikraus/u8glib" class="uri">https://github.com/olikraus/u8glib</a></li>
</ul>
<p>Scroll down to “U8glib for Arduino”</p>
<p>Download the library, and then in the Arduino editor <code>Sketch &gt; Include Library &gt; Add ZIP library</code></p>
</div>
</div>
